<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
  <meta>
    <author>Zach Graves (zachg@yahoo-inc.com)</author>
    <documentationURL>http://vimeo.com/api/docs/simple-api</documentationURL>
    <sampleQuery>select * from {table} where video_id='4964539'</sampleQuery>
  <!--lowering-->
		<sampleQuery> URIPattern: /vimeo.video/{video_id}</sampleQuery>
		<sampleQuery> URIExample: /vimeo.video/4964539</sampleQuery>
</meta>
  <bindings>
    <select itemPath="" produces="XML">
      <urls>
        <url>http://vimeo.com/api/v2/video/{video_id}.xml</url>
      </urls>
      <inputs>
        <key id="video_id" paramType="path" required="true" type="xs:string"/>
      </inputs>
    </select> 
  <!--lifting-->
 <function name="lifting">
	<inputs>
		<pipe id="oneXML" paramType="variable"/>
		<key id="URI" paramType="variable" required="true"/>
	</inputs>
	<execute>
		<![CDATA[
	var oneJSON= y.xmlToJson(oneXML);
	var oneJSONLD={};
	oneJSONLD['@id']=URI;
	oneJSONLD['@context']= {"dcterms":"http://purl.org/dc/terms/","foaf":"http://xmlns.com/foaf/0.1/","schema":"http://schema.org/"};
	oneJSONLD['@type']= 'schema:Movie';

  oneJSONLD['dcterms:description'] = oneJSON['videos']['video']['description'];
  var value = oneJSON['videos']['video']['user_id'];
  var interlinkuri = 'http://rdf.onekin.org/vimeo.user/{userid}';
  oneJSONLD['foaf:maker']= interlinkuri.replace(/{.*}/, value);
	//new mappings
	
	oneJSONLD['@context']['adms'] = 'http://www.w3.org/ns/adms';

  oneJSONLD['adms:identifier'] = oneJSON['videos']['video']['id'];
response.object = oneJSONLD;]]>
	</execute>
</function>
</bindings>
</table>