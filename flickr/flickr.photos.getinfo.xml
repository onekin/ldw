<?xml version="1.0" encoding="UTF-8"?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
<meta>
	<author>David Young;davidbeckham2901@gmail.com (author of the original ODT)</author>
	<author>Iker Azpeitia (author of this ODT++)</author>
	<documentationURL>http://www.flickr.com/services/api/flickr.photos.getInfo.html</documentationURL>
    <sampleQuery>URIPattern: flickrphoto/{photo_id}</sampleQuery>
    <sampleQuery>URIexample: flickrphoto/5912726294</sampleQuery>
    <sampleQuery>select * from {table} where photo_id="5912726294" and api_key="2a97cfbd41563a5c6a5dbb9853fcb7d2" | {table}.lifting('http://rdf.onekin.org/flickrphoto/5912726294')</sampleQuery>
    </meta>
<bindings>
	<select itemPath="rsp.photo" produces="XML">
		<urls><url env="all">https://api.flickr.com/services/rest/?method=flickr.photos.getInfo</url></urls>
		<inputs>
			<key id="photo_id" type="xs:string" paramType="query" required="true"/>
			<key id="api_key" type="xs:string" private="true" paramType="query" required="true"/>
   		</inputs>
	</select>
    
<function name="lifting">
<inputs>
<pipe id="onePhotoXML" paramType="variable" />
<key id="URI" paramType="variable" required="true"/>
</inputs>
<execute> <![CDATA[
var onePhotoJSON= y.xmlToJson(onePhotoXML);
var onePhotoJSONLD={'@context':{rdfs:'http://www.w3.org/2000/01/rdf-schema#', dcterm: 'http://purl.org/dc/terms/',
foaf: 'http://xmlns.com/foaf/0.1/'}};
onePhotoJSONLD['@id']= URI;
onePhotoJSONLD['@type']='foaf:Image';
onePhotoJSONLD['dcterm:title']=onePhotoJSON.photo.title;
onePhotoJSONLD['dcterm:description']=onePhotoJSON.photo.description;
onePhotoJSONLD['dcterm:created']=onePhotoJSON.photo.dates.taken;
onePhotoJSONLD['dcterm:creator']='http://rdf.onekin.org/flickr/user/'+onePhotoJSON.photo.owner.nsid;
response.object = onePhotoJSONLD;]]>
</execute>
</function>    
</bindings>
</table>
