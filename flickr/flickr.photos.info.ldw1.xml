<?xml version="1.0" encoding="UTF-8"?>      <table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">    <meta>        <author>Iker Azpeitia</author>        <description>A LD wrapper to retrieve a Flickr photo's information.</description>        <!--lowering-->        <sampleQuery> URIPattern: http://rdf.onekin.org/flickr.photos.info.ldw1/resource/{id}</sampleQuery>		<sampleQuery> URIExample: http://rdf.onekin.org/flickr.photos.info.ldw1/resource/8142637344</sampleQuery>		<sampleQuery> URIExample: http://rdf.onekin.org/flickr.photos.info.ldw1/resource/27376196615</sampleQuery>	</meta>    <bindings>        <select itemPath="results.*" produces="XML">            <inputs>		<key id="id" type="xs:string" paramType="variable" required="true"/>		<key id="api_key" type="xs:string" paramType="variable" required="true" default="2c894ba749b4137b6f7ab127c86890ec"/>             </inputs>             <execute>                <![CDATA[ var loweringselect = "env 'store://datatables.org/alltableswithkeys'; select * from flickr.photos.info where photo_id=@id and api_key=@api_key"; var loweringparams ={}; loweringparams ['id']= id; loweringparams ['api_key']= api_key; var loweringquery = y.query (loweringselect,loweringparams); response.object =  loweringquery.results; ]]>            </execute>      </select> <function name="lifting">  <inputs>     <pipe id="oneXML" paramType="variable"/>     <key id="URI" paramType="variable" required="true"/>  </inputs> <execute><![CDATA[function getValue(dataPath) {try{return eval(dataPath) || null; }catch(err){return null;}}function toDurationFormat(str) {  try{    var secs = parseInt(str);    var mins = Math.floor(secs/60);    secs = secs - (mins*60);    return "PT"+mins+"M"+secs+"S";  }catch(err){return "33PT0M00S";}}function getThumbnailUrl (){  var farm =getValue("oneJSON['photo']['farm']");  var server =getValue("oneJSON['photo']['server']");  var id=getValue("oneJSON['photo']['id']");  var secret=getValue("oneJSON['photo']['secret']");  var atid = 'https://c1.staticflickr.com/'+farm+'/'+server+'/'+id+'_'+secret;  return atid+'_z.jpg';}function getEncoded(txt){return txt? txt.replace ('"', "'"): null;}try{ var oneJSON= y.xmlToJson(oneXML);	var oneJSONLD={};	oneJSONLD['@id']=URI;	oneJSONLD['@context']= {"schema":"http://schema.org/",    "VideoObject" : {"@id": "schema:VideoObject", "@type": "@id"},    "name": "schema:name",    "description": "http://schema.org/description",    "thumbnailUrl": {"@type": "@id", "@id": "schema:thumbnail"},    "uploadDate": "schema:uploadDate",    "duration": "schema:duration",    "contentURL": "schema:contentURL",    "interactionCount": "schema:interactionCount"};  oneJSONLD['@type']= 'VideoObject';  oneJSONLD['name'] = getValue("oneJSON['photo']['title']");  oneJSONLD['description'] = getEncoded(getValue("oneJSON['photo']['description']"));  oneJSONLD['thumbnailUrl'] = getThumbnailUrl ();  oneJSONLD['uploadDate'] = getValue("oneJSON['photo']['dates']['taken']");  oneJSONLD['duration'] = toDurationFormat(getValue("oneJSON['photo']['video']['duration']"));  oneJSONLD['contentUrl'] = getValue("oneJSON['photo']['urls']['url'].content");  //there is not a xml attribute to derived the   "embedUrl": "http://schema.org/embedUrl", property   oneJSONLD['interactionCount']=getValue("oneJSON['photo']['views']")    }catch (err){ y.log(err);}    response.object = oneJSONLD;]]>   </execute></function>    </bindings> </table>